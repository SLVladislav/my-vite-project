{"version":3,"file":"time.js","sources":["../src/time.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nconst refs = {\n    selector: document.querySelector(\"#datetime-picker\"),\n    btnStart: document.querySelector(\"button[data-start]\"),\n    timerDays: document.querySelector(\"span[data-days]\"),\n    timerHours: document.querySelector(\"span[data-hours]\"),\n    timerMinutes: document.querySelector(\"span[data-minutes]\"),\n    timerSeconds: document.querySelector(\"span[data-seconds]\")\n}\n\nrefs.btnStart.addEventListener(\"click\", () => {\n    timer.start();  \n});\n\nlet userSelectedDate = 0;\nrefs.btnStart.disabled = true;\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        console.log(selectedDates[0]);\n        if (selectedDates[0] < Date.now()) {             \n            alert(\"Please choose a date in the future\"); \n                   \n        } else {   \n            refs.btnStart.disabled = false;\n            userSelectedDate = selectedDates[0];\n        } \n        \n                \n        console.log(userSelectedDate);\n    },   \n};\n// console.log(options);\n\n\nflatpickr(refs.selector, options);\n\nclass Timer {\n    constructor({onTick}) {\n        this.intervalId = null,\n        this.isActive = false,\n        this.onTick = onTick\n    }\n    start() {\n        refs.btnStart.disabled = true;\n        \n        if (this.isActive) {\n            return;\n        }\n        \n        this.isActive = true;\n        this.intervalId = setInterval(() => {\n            const currentTime = Date.now();\n            const deltaTime = userSelectedDate - currentTime;\n            const time = convertMs(deltaTime);\n            this.onTick(time);\n        \n            // if (deltaTime <= 0) {\n            //     this.stop();\n            // }\n\n            \n        }, 1000)\n    }\n    stop() {       \n        clearInterval(this.intervalId);  \n        this.isActive = false;\n        // const time = convertMs(0);\n        // this.onTick = time;\n    }\n}\n\nconst timer = new Timer({\n    onTick: updateTimer,\n});\n\nfunction updateTimer({ days, hours, minutes, seconds }) {\n    refs.timerDays.textContent = `${days}`;\n    refs.timerHours.textContent = `${hours}`;\n    refs.timerMinutes.textContent = `${minutes}`;\n    refs.timerSeconds.textContent = `${seconds}`;\n}\n\nconst addLeadingZero = (value) => {\n    return  String(value).padStart(2, \"0\");\n}\nfunction convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n  \n    // Remaining days\n    const days = addLeadingZero(Math.floor(ms / day));\n    // Remaining hours\n    const hours = addLeadingZero(Math.floor((ms % day) / hour));\n    // Remaining minutes\n    const minutes = addLeadingZero(Math.floor(((ms % day) % hour) / minute));\n    // Remaining seconds\n    const seconds = addLeadingZero(Math.floor((((ms % day) % hour) % minute) / second));\n  \n    return { days, hours, minutes, seconds };\n  }\n  \n//   console.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\n//   console.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\n//   console.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}\n  "],"names":["refs","timer","userSelectedDate","options","selectedDates","flatpickr","Timer","onTick","currentTime","deltaTime","time","convertMs","updateTimer","days","hours","minutes","seconds","addLeadingZero","value","ms"],"mappings":"uIAGA,MAAMA,EAAO,CACT,SAAU,SAAS,cAAc,kBAAkB,EACnD,SAAU,SAAS,cAAc,oBAAoB,EACrD,UAAW,SAAS,cAAc,iBAAiB,EACnD,WAAY,SAAS,cAAc,kBAAkB,EACrD,aAAc,SAAS,cAAc,oBAAoB,EACzD,aAAc,SAAS,cAAc,oBAAoB,CAC7D,EAEAA,EAAK,SAAS,iBAAiB,QAAS,IAAM,CAC1CC,EAAM,MAAK,CACf,CAAC,EAED,IAAIC,EAAmB,EACvBF,EAAK,SAAS,SAAW,GAEzB,MAAMG,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnB,QAAQ,IAAIA,EAAc,CAAC,CAAC,EACxBA,EAAc,CAAC,EAAI,KAAK,IAAG,EAC3B,MAAM,oCAAoC,GAG1CJ,EAAK,SAAS,SAAW,GACzBE,EAAmBE,EAAc,CAAC,GAItC,QAAQ,IAAIF,CAAgB,CAC/B,CACL,EAIAG,EAAUL,EAAK,SAAUG,CAAO,EAEhC,MAAMG,CAAM,CACR,YAAY,CAAC,OAAAC,CAAM,EAAG,CAClB,KAAK,WAAa,KAClB,KAAK,SAAW,GAChB,KAAK,OAASA,CACtB,CACI,OAAQ,CACJP,EAAK,SAAS,SAAW,GAErB,MAAK,WAIT,KAAK,SAAW,GAChB,KAAK,WAAa,YAAY,IAAM,CAChC,MAAMQ,EAAc,KAAK,IAAK,EACxBC,EAAYP,EAAmBM,EAC/BE,EAAOC,EAAUF,CAAS,EAChC,KAAK,OAAOC,CAAI,CAO5B,EAAW,GAAI,EACf,CACI,MAAO,CACH,cAAc,KAAK,UAAU,EAC7B,KAAK,SAAW,EAGxB,CACA,CAEA,MAAMT,EAAQ,IAAIK,EAAM,CACpB,OAAQM,CACZ,CAAC,EAED,SAASA,EAAY,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACpDhB,EAAK,UAAU,YAAc,GAAGa,CAAI,GACpCb,EAAK,WAAW,YAAc,GAAGc,CAAK,GACtCd,EAAK,aAAa,YAAc,GAAGe,CAAO,GAC1Cf,EAAK,aAAa,YAAc,GAAGgB,CAAO,EAC9C,CAEA,MAAMC,EAAkBC,GACZ,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,EAEzC,SAASP,EAAUQ,EAAI,CAQnB,MAAMN,EAAOI,EAAe,KAAK,MAAME,EAAK,KAAG,CAAC,EAE1CL,EAAQG,EAAe,KAAK,MAAOE,EAAK,MAAO,IAAI,CAAC,EAEpDJ,EAAUE,EAAe,KAAK,MAAQE,EAAK,MAAO,KAAQ,GAAM,CAAC,EAEjEH,EAAUC,EAAe,KAAK,MAASE,EAAK,MAAO,KAAQ,IAAU,GAAM,CAAC,EAElF,MAAO,CAAE,KAAAN,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,CAC5C"}